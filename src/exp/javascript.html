<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JavaScript - A-Frame</title>
  <meta name="description" content="">
  <script src="../assets/js/aframe.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
  <style>
    #moniter {
      position: absolute;
      left: 0;
      top: 0;
      background: rgba(0,0,0,.1);
    }
    #moniter textarea {
      background: transparent;
      width: 300px;
      height: 100vh;
      padding: 10px;
      border: none;
      outline: none;
      box-sizing: border-box;
      resize: none;
    }
  </style>
</head>
<body>
<a-scene>

  <a-assets>
  </a-assets>

  <!-- camera -->
  <a-camera position="0 0 0">
    <a-cursor color="#f00" max-distance=".5"></a-cursor>
  </a-camera>

  <!-- object -->
  <a-plane color="#ccc" height="5" width="5" position="0 0 -3.5" rotation="-90 0 0"></a-plane>
  <a-box id="box1" class="box" color="#f90" position="0 .5 -3" rotation="0 45 0"></a-box>

</a-scene>
<div id="moniter"><textarea>
カーソルの当たったオブジェにjQueryの一部イベントを実行できる。有効なイベントは下記。
  - click
  - mouseup
  - mousedown

$(this)でオブジェ自身をちゃんと返せる。

jQueryの「hide()」も正常動作はしておりDOMに「display:none」が付与されるが、3D描画上は変化しない。
attr()で属性を書き換えると3D描画に影響を与えられる。

attrでposition,rotationを取得すると、x,y,zに値が入った配列で取得できる。


--------------------------------------------------
- boxのイベントログ

</textarea></div>
<script>
  $('.box').on('click', function() {
    $('#moniter textarea').html($('#moniter textarea').html() + 'clickでY軸15度回転&#10;');
    var r = $(this).attr('rotation');
    r['y'] += 15;
    console.log(r);
    $(this).attr('rotation', r['x']+' '+r['y']+' '+r['z']);
  });
  $('.box').on('mousedown', function() {
    $('#moniter textarea').html($('#moniter textarea').html() + 'mousedownで色変化&#10;');
    $(this).attr('color', '#099');
  });
  $('.box').on('mouseup', function() {
    $('#moniter textarea').html($('#moniter textarea').html() + 'mouseupで色戻す&#10;');
    $(this).attr('color', '#f90');
  });
</script>
</body>
</html>
